# üîî –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è Telegram –Ω–∞ Railway (cron)

–Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ—ó–∑–¥–∫–∏, –∫–æ–ª–∏ –±–µ–∫–µ–Ω–¥ –∑–∞–¥–µ–ø–ª–æ—î–Ω–∏–π –Ω–∞ [Railway](https://railway.com).

Railway **–Ω–µ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ cron**, —Ç–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å, —è–∫–∏–π —â–æ–¥–Ω—è –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à backend.

---

## –©–æ –≤–∂–µ —î –≤ –ø—Ä–æ—î–∫—Ç—ñ

1. **–ó–∞ –¥–µ–Ω—å –¥–æ –ø–æ—ó–∑–¥–∫–∏** ‚Äî –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´–∑–∞–≤—Ç—Ä–∞ —É –≤–∞—Å –ø–æ—ó–∑–¥–∫–∞¬ª (—â–æ–¥–Ω—è –≤–≤–µ—á–µ—Ä—ñ).
2. **–í –¥–µ–Ω—å –ø–æ—ó–∑–¥–∫–∏ –≤—Ä–∞–Ω—Ü—ñ** ‚Äî –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´—Å—å–æ–≥–æ–¥–Ω—ñ —É –≤–∞—Å –ø–æ—ó–∑–¥–∫–∞¬ª (—â–æ–¥–Ω—è –≤—Ä–∞–Ω—Ü—ñ).

–û–±–∏–¥–≤–∞ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ HTTP POST –Ω–∞ –≤–∞—à backend –∑ –∞–¥–º—ñ–Ω-–∑–∞–≥–æ–ª–æ–≤–∫–æ–º.

---

## –ö—Ä–æ–∫ 1: URL –≤–∞—à–æ–≥–æ backend –Ω–∞ Railway

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø—Ä–æ–µ–∫—Ç: [Railway Dashboard](https://railway.com/project/b43d0897-c2ac-4ec5-883a-1a238e87a997) (–∞–±–æ –≤–∞—à –ø—Ä–æ–µ–∫—Ç).
2. –í–∏–±–µ—Ä—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å **backend**.
3. **Settings** ‚Üí **Networking** ‚Üí **Public Networking**.
4. –°–∫–æ–ø—ñ—é–π—Ç–µ **URL** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `https://kyiv-malyn-booking-production.up.railway.app`).  
   –Ø–∫—â–æ –¥–æ–º–µ–Ω —â–µ –Ω–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π ‚Äî –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Generate Domain**.

–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ü–µ–π URL ‚Äî –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è cron.

---

## –ö—Ä–æ–∫ 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)

Endpoint –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å –∑–∞—Ö–∏—â–µ–Ω–∏–π –∞–¥–º—ñ–Ω-—Ç–æ–∫–µ–Ω–æ–º. –£ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏:

```
Authorization: admin-authenticated
```

(–¶–µ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ç–æ–∫–µ–Ω, —è–∫–∏–π –±–µ–∫–µ–Ω–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ª–æ–≥—ñ–Ω—É –≤ –∞–¥–º—ñ–Ω–∫—É.)

–ë–µ–∑ —Ü—å–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±—É–¥–µ `401 Unauthorized`.

---

## –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è cron (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)

–ü—ñ–¥—ñ–π–¥–µ –±—É–¥—å-—è–∫–∏–π —Å–µ—Ä–≤—ñ—Å, —â–æ —Ä–æ–±–∏—Ç—å HTTP-–∑–∞–ø–∏—Ç–∏ –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

- [cron-job.org](https://cron-job.org) (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)
- [easycron.com](https://www.easycron.com)
- [Uptime Robot](https://uptimerobot.com) (–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ + HTTP hit –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º)

### –ü—Ä–∏–∫–ª–∞–¥: cron-job.org

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –Ω–∞ [cron-job.org](https://cron-job.org).
2. **Create Cronjob**.
3. **–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´–∑–∞–≤—Ç—Ä–∞¬ª (–∑–∞ –¥–µ–Ω—å –¥–æ –ø–æ—ó–∑–¥–∫–∏):**
   - **Title:** `Telegram: –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∑–∞ –¥–µ–Ω—å –¥–æ –ø–æ—ó–∑–¥–∫–∏`
   - **URL:** `https://–í–ê–®-BACKEND-URL.railway.app/telegram/send-reminders`
   - **Method:** `POST`
   - **Request Headers:**  
     `Authorization` = `admin-authenticated`
   - **Schedule:** —â–æ–¥–Ω—è –æ **20:00** (–∞–±–æ —ñ–Ω—à–∏–π —á–∞—Å —É –≤–∞—à–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—ñ).
   - –ó–±–µ—Ä–µ–≥—Ç–∏.

4. **–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´—Å—å–æ–≥–æ–¥–Ω—ñ¬ª (–≤ –¥–µ–Ω—å –ø–æ—ó–∑–¥–∫–∏):**
   - **Title:** `Telegram: –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –≤ –¥–µ–Ω—å –ø–æ—ó–∑–¥–∫–∏`
   - **URL:** `https://–í–ê–®-BACKEND-URL.railway.app/telegram/send-reminders-today`
   - **Method:** `POST`
   - **Request Headers:**  
     `Authorization` = `admin-authenticated`
   - **Schedule:** —â–æ–¥–Ω—è –æ **08:00** (–∞–±–æ —ñ–Ω—à–∏–π —Ä–∞–Ω–∫–æ–≤–∏–π —á–∞—Å).
   - –ó–±–µ—Ä–µ–≥—Ç–∏.

–ü—ñ–¥—Å—Ç–∞–≤—Ç–µ –∑–∞–º—ñ—Å—Ç—å `–í–ê–®-BACKEND-URL` —Ä–µ–∞–ª—å–Ω–∏–π –¥–æ–º–µ–Ω backend –∑ –∫—Ä–æ–∫—É 1.

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Ä—É—á–Ω—É (curl)

–ü–µ—Ä–µ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º cron –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ backend –¥–æ—Å—Ç—É–ø–Ω–∏–π —ñ –ø—Ä–∏–π–º–∞—î –∑–∞–ø–∏—Ç–∏:

**–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∑–∞ –¥–µ–Ω—å –¥–æ –ø–æ—ó–∑–¥–∫–∏:**
```bash
curl -X POST "https://–í–ê–®-BACKEND-URL.railway.app/telegram/send-reminders" \
  -H "Authorization: admin-authenticated"
```

**–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –≤ –¥–µ–Ω—å –ø–æ—ó–∑–¥–∫–∏:**
```bash
curl -X POST "https://–í–ê–®-BACKEND-URL.railway.app/telegram/send-reminders-today" \
  -H "Authorization: admin-authenticated"
```

–£ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –æ—á—ñ–∫—É—î—Ç—å—Å—è JSON, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:
```json
{
  "success": true,
  "message": "–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ: 3, –ø–æ–º–∏–ª–æ–∫: 0",
  "total": 3,
  "sent": 3,
  "failed": 0
}
```

–Ø–∫—â–æ Telegram –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –Ω–∞ backend, –±—É–¥–µ `400` –∑ —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–æ —Ç–µ, —â–æ –±–æ—Ç –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ.

---

## –©–æ —Ä–æ–±–ª—è—Ç—å endpoint‚Äô–∏

| Endpoint | –ö–æ–ª–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ) | –©–æ —Ä–æ–±–∏—Ç—å |
|----------|--------------------------------|------------|
| `POST /telegram/send-reminders` | –©–æ–¥–Ω—è –æ 20:00 | –®—É–∫–∞—î –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –Ω–∞ **–∑–∞–≤—Ç—Ä–∞**, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤ Telegram –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´–∑–∞–≤—Ç—Ä–∞ —É –≤–∞—Å –ø–æ—ó–∑–¥–∫–∞¬ª. |
| `POST /telegram/send-reminders-today` | –©–æ–¥–Ω—è –æ 08:00 | –®—É–∫–∞—î –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –Ω–∞ **—Å—å–æ–≥–æ–¥–Ω—ñ**, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è ¬´—Å—å–æ–≥–æ–¥–Ω—ñ —É –≤–∞—Å –ø–æ—ó–∑–¥–∫–∞¬ª. |

–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –æ—Ç—Ä–∏–º—É—é—Ç—å —Ç—ñ–ª—å–∫–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è, —É —è–∫–∏—Ö –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π `telegramChatId` (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –Ω–∞ –±–æ—Ç–∞).

---

## –ß–µ–∫–ª–∏—Å—Ç

- [ ] Backend –∑–∞–¥–µ–ø–ª–æ—î–Ω–∏–π –Ω–∞ Railway, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –ø—É–±–ª—ñ—á–Ω–∏–π URL.
- [ ] –£ backend –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è: `TELEGRAM_BOT_TOKEN`, `TELEGRAM_ADMIN_CHAT_ID` (–¥–∏–≤. `RAILWAY_SETUP.md`).
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –≤—Ä—É—á–Ω—É: `curl` –Ω–∞ –æ–±–∏–¥–≤–∞ endpoint‚Äô–∏ –∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Authorization: admin-authenticated`.
- [ ] –ù–∞ cron-job.org (–∞–±–æ –∞–Ω–∞–ª–æ–∑—ñ) —Å—Ç–≤–æ—Ä–µ–Ω–æ –¥–≤–∞ cronjob‚Äô–∏ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º URL —ñ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º.
- [ ] –ß–∞—Å –≤–∏–∫–ª–∏–∫—É –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö cron –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∞—à–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É.

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ—ó–∑–¥–∫–∏ –±—É–¥—É—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
